<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>9. Correlation Coefficient &#8212; Machine Learning for Research</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css?v=def86cc0" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    
    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="10. Linear Algebra and Python Lists" href="Matrices-student.html" />
    <link rel="prev" title="8. Linear Least Squares" href="least-squares-01.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Matrices-student.html" title="10. Linear Algebra and Python Lists"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="least-squares-01.html" title="8. Linear Least Squares"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../intro.html">Machine Learning for Research</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">9. </span>Correlation Coefficient</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section class="tex2jax_ignore mathjax_ignore" id="correlation-coefficient">
<h1><span class="section-number">9. </span>Correlation Coefficient<a class="headerlink" href="#correlation-coefficient" title="Link to this heading">¶</a></h1>
<p>We assume, as usual, a ground truth model <span class="math notranslate nohighlight">\(y = f(x) + \epsilon\)</span> where <span class="math notranslate nohighlight">\(f\)</span> is usually unknown, a (possibly random) sample of points <span class="math notranslate nohighlight">\((x_1, y_1), \cdots, (x_n, y_n)\)</span> and a linear model <span class="math notranslate nohighlight">\(\tilde{y} = ax + b\)</span>. In this setting we usually need to know <em>how good</em> the linear model is – how well does if capture the ground truth <span class="math notranslate nohighlight">\(f(x)\)</span>?</p>
<p>One obvious measure is the sum of squared errors, which we minimized last class to derive the linear regression equations.</p>
<div class="math notranslate nohighlight">
\[SSE = \sum_{i=1}^n (\tilde{y}_i - y_i)^2\]</div>
<p>While this literally captures the error in the model on each point, it is hard to interpret, it scales with the number of points, and is in different units from the given data. We can normalize it to the mean sum of squared errors:</p>
<div class="math notranslate nohighlight">
\[MSE = \dfrac{1}{n}\sum_{i=1}^n (\tilde{y}_i - y_i)^2\]</div>
<p>which at least doesn’t scale with the number of points but is in different units. Thus by taking a radical</p>
<div class="math notranslate nohighlight">
\[RMSE = \sqrt{\dfrac{1}{n}\sum_{i=1}^n (\tilde{y}_i - y_i)^2}\]</div>
<p>we get the root mean sum of squared errors. This at least scales with the magnitude of the <span class="math notranslate nohighlight">\(y\)</span> values, so you can interpret it somewhat. It is also similar
to a standard deviation, which is familiar to many people. (Note some texts would divide by <span class="math notranslate nohighlight">\(n-2\)</span> instead of <span class="math notranslate nohighlight">\(n\)</span> to create a truly unbiased
estimator for the standard deviation, but this simpler version aggrees with other data science presentations, including kaggle.)</p>
<section id="pearson-s-correlation-coefficient">
<h2><span class="section-number">9.1. </span>Pearson’s Correlation Coefficient<a class="headerlink" href="#pearson-s-correlation-coefficient" title="Link to this heading">¶</a></h2>
<p>While variants of SSE have their place, one cannot escape the use of <span class="math notranslate nohighlight">\(r\)</span>, the Pearson’s correlation coefficient. Students learn in algebra classes
that a linear regression coefficient <span class="math notranslate nohighlight">\(r=1\)</span> is a perfect positive correlation and <span class="math notranslate nohighlight">\(r=-1\)</span> is a perfect negative correlation and <span class="math notranslate nohighlight">\(r=0.5\)</span> is a weak
correlation, for example. We will take a more precise approach.</p>
<p>One formular for <span class="math notranslate nohighlight">\(r\)</span> is</p>
<div class="math notranslate nohighlight">
\[r^2 = \dfrac{SS_{reg}}{SS_{tot}} = \dfrac{\sum_i(\tilde{y}_i - \overline{y})^2} {\sum_i(y_i - \overline{y})^2}\]</div>
<p>Let’s unpack this. <span class="math notranslate nohighlight">\(SS_{reg}\)</span> is the sum of squared-error due to regression and <span class="math notranslate nohighlight">\(SS_{tot}\)</span> is the sum of squared-error total (due to the original data).
Here <span class="math notranslate nohighlight">\(\overline{y} = \frac1n\sum_i y_i\)</span> is the mean of the observed <span class="math notranslate nohighlight">\(y_i\)</span> values. <span class="math notranslate nohighlight">\(SS_{tot}\)</span>, then, is the variance of the observed <span class="math notranslate nohighlight">\(y_i\)</span> values – it is the
sum of the squared deviations of the observations from their mean.</p>
<p><span class="math notranslate nohighlight">\(SS_{reg}\)</span>, on the other hand, is the variance of the predicted <span class="math notranslate nohighlight">\(\tilde{y}_i\)</span> values, relative to the same observed mean.</p>
<p>The ratio of the two is the ratio of the “explained variance” to the “total variance.” There is always variance in the original dataset. If our linear
model very closely fits the data, then it will explain most of that original variance. That would correspond to a high <span class="math notranslate nohighlight">\(r^2\)</span> value. On the other hand
a low <span class="math notranslate nohighlight">\(r^2\)</span> indicates that there is variance in the data that is not capture by the linear model. Something else is happening to create this
data shape.</p>
<p>It can be helpful to think of <span class="math notranslate nohighlight">\(r^2\)</span> as the percent of “explained variance”. You’ll notice this formula is for <span class="math notranslate nohighlight">\(r^2\)</span>, not <span class="math notranslate nohighlight">\(r\)</span>. Obviously both are <span class="math notranslate nohighlight">\(&lt;1\)</span> but
they are not identical. We may see more details of the various ways to interpret <span class="math notranslate nohighlight">\(r\)</span> vs <span class="math notranslate nohighlight">\(r^2\)</span> but honestly for most cases this explanation
is quite good enough and better than what most people understand!</p>
</section>
<section id="r-0">
<h2><span class="section-number">9.2. </span>r=0<a class="headerlink" href="#r-0" title="Link to this heading">¶</a></h2>
<p>You may have been taught that <span class="math notranslate nohighlight">\(r=0\)</span> implies no correlation between <span class="math notranslate nohighlight">\(x\)</span> and <span class="math notranslate nohighlight">\(y\)</span> pairs. This is often indicated in math books with an
amorphous cloud of points, wandering lonely across the page, enigmatic and unknowable. Actually a number of highly correlated
datasets can claim to possess <span class="math notranslate nohighlight">\(r=0\)</span> values as this helpful chart shows<a class="footnote-reference brackets" href="#id2" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p>
<p><img alt="Examples of correlation" src="../_images/correlation_examples.png" /></p>
<p>To be correct, <span class="math notranslate nohighlight">\(r=0\)</span> implies no <strong>linear</strong> correlation between <span class="math notranslate nohighlight">\(x\)</span> and <span class="math notranslate nohighlight">\(y\)</span>. If it so happens that every predicted <span class="math notranslate nohighlight">\(\tilde{y}_i\)</span> value is identical to the
mean <span class="math notranslate nohighlight">\(\overline{y}\)</span>, then <span class="math notranslate nohighlight">\(r^2=0\)</span>. Datasets with perfect vertical symmetry can have this property.</p>
<hr class="footnotes docutils" />
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id2" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>By DenisBoigelot, original uploader was Imagecreator - Own work, original uploader was Imagecreator, CC0, <a class="reference external" href="https://commons.wikimedia.org/w/index.php?curid=15165296">https://commons.wikimedia.org/w/index.php?curid=15165296</a></p>
</aside>
</aside>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./lessons"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../intro.html">
              <img class="logo" src="../_static/ML-logo-1.webp" alt="Logo of Project name not set"/>
            </a></p>
  <div>
    <h3><a href="../intro.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">9. Correlation Coefficient</a><ul>
<li><a class="reference internal" href="#pearson-s-correlation-coefficient">9.1. Pearson’s Correlation Coefficient</a></li>
<li><a class="reference internal" href="#r-0">9.2. r=0</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="least-squares-01.html"
                          title="previous chapter"><span class="section-number">8. </span>Linear Least Squares</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="Matrices-student.html"
                          title="next chapter"><span class="section-number">10. </span>Linear Algebra and Python Lists</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/lessons/Correlation_Coefficient.md"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Matrices-student.html" title="10. Linear Algebra and Python Lists"
             >next</a> |</li>
        <li class="right" >
          <a href="least-squares-01.html" title="8. Linear Least Squares"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../intro.html">Machine Learning for Research</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">9. </span>Correlation Coefficient</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2023.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    </div>
  </body>
</html>